(self["webpackChunkmy_project"]=self["webpackChunkmy_project"]||[]).push([[6431],{2318:function(t,n,i){var e=i(60410);e.__esModule&&(e=e.default),"string"===typeof e&&(e=[[t.id,e,""]]),e.locals&&(t.exports=e.locals);var a=i(56).Z;a("1dd7094e",e,!0,{sourceMap:!1,shadowMode:!1})},68170:function(t,n,i){"use strict";i.r(n),i.d(n,{default:function(){return b}});var e={uniForms:i(45442).Z,uniFormsItem:i(8831).Z,uniEasyinput:i(62651).Z},a=function(){var t=this,n=t.$createElement,i=t._self._c||n;return i("v-uni-view",{staticClass:"uni-container"},[i("uni-forms",{ref:"form",attrs:{value:t.formData,validateTrigger:"bind"}},[i("uni-forms-item",{attrs:{name:"permission_id",label:"权限ID",required:!0}},[i("uni-easyinput",{attrs:{placeholder:"权限唯一标识，不可修改，不允许重复",trim:"both",disabled:!0},on:{input:function(n){arguments[0]=n=t.$handleEvent(n),t.binddata("permission_id",n.detail.value)}},model:{value:t.formData.permission_id,callback:function(n){t.$set(t.formData,"permission_id",n)},expression:"formData.permission_id"}})],1),i("uni-forms-item",{attrs:{name:"permission_name",label:"权限名称",required:!0}},[i("v-uni-input",{staticClass:"uni-input-border",attrs:{placeholder:"权限名称",trim:"both"},on:{input:function(n){arguments[0]=n=t.$handleEvent(n),t.binddata("permission_name",n.detail.value)}},model:{value:t.formData.permission_name,callback:function(n){t.$set(t.formData,"permission_name",n)},expression:"formData.permission_name"}})],1),i("uni-forms-item",{attrs:{name:"comment",label:"备注"}},[i("v-uni-textarea",{staticClass:"uni-textarea-border",attrs:{placeholder:"备注",trim:"both"},on:{input:function(n){arguments[0]=n=t.$handleEvent(n),t.binddata("comment",n.detail.value)}},model:{value:t.formData.comment,callback:function(n){t.$set(t.formData,"comment",n)},expression:"formData.comment"}})],1),i("v-uni-view",{staticClass:"uni-button-group"},[i("v-uni-button",{staticClass:"uni-button",staticStyle:{width:"100px"},attrs:{type:"primary"},on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.submit.apply(void 0,arguments)}}},[t._v(t._s(t.$t("common.button.submit")))]),i("v-uni-navigator",{staticStyle:{"margin-left":"15px"},attrs:{"open-type":"navigateBack"}},[i("v-uni-button",{staticClass:"uni-button",staticStyle:{width:"100px"}},[t._v(t._s(t.$t("common.button.back")))])],1)],1)],1)],1)},o=[],s=i(41541),r=(i(26699),i(32023),i(47941),i(41539),i(26467)),u=i(65167)["Z"],m=u.database(),l=(m.command,"uni-id-permissions");function c(t){var n={};for(var i in r.sC)t.includes(i)&&(n[i]=r.sC[i]);return n}var d,f={data:function(){var t={permission_id:"",permission_name:"",comment:""};return{formData:t,formOptions:{},rules:(0,s.Z)({},c(Object.keys(t)))}},onLoad:function(t){if(t.id){var n=t.id;this.formDataId=n,this.getDetail(n)}},onReady:function(){this.$refs.form.setRules(this.rules)},methods:{submit:function(){var t=this;uni.showLoading({mask:!0}),this.$refs.form.validate().then((function(n){t.submitForm(n)})).catch((function(){uni.hideLoading()}))},submitForm:function(t){var n=this;m.collection(l).doc(this.formDataId).update(t).then((function(t){uni.showToast({title:"修改成功"}),n.getOpenerEventChannel().emit("refreshData"),setTimeout((function(){return uni.navigateBack()}),500)})).catch((function(t){uni.showModal({content:t.message||"请求服务失败",showCancel:!1})})).finally((function(){uni.hideLoading()}))},getDetail:function(t){var n=this;uni.showLoading({mask:!0}),m.collection(l).doc(t).field("permission_id,permission_name,comment").get().then((function(t){var i=t.result.data[0];i&&(n.formData=i)})).catch((function(t){uni.showModal({content:t.message||"请求服务失败",showCancel:!1})})).finally((function(){uni.hideLoading()}))}}},p=f,h=(i(2318),i(69453)),v=(0,h.Z)(p,a,o,!1,null,"2214996a",null,!1,e,d),b=v.exports},26467:function(t,n,i){"use strict";i.d(n,{aQ:function(){return a},sC:function(){return e}});i(89029),i(23957),i(24603),i(28450),i(74916),i(88386),i(39714),i(57658);var e={permission_id:{rules:[{required:!0},{format:"string"}],label:"权限标识"},permission_name:{rules:[{required:!0},{format:"string"}],label:"权限名称"},comment:{rules:[{format:"string"}],label:"备注"}},a={}},60410:function(t,n,i){"use strict";i.r(n);var e=i(8081),a=i.n(e),o=i(23645),s=i.n(o),r=s()(a());r.push([t.id,"[data-v-2214996a] .uni-forms-item__label{width:90px!important}",""]),n["default"]=r}}]);